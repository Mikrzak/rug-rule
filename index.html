<!DOCTYPE html>
<html lang="pol">
<head>
    <link rel="stylesheet" href="style.css">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rug rule</title>
</head>
<body id="body">
    <canvas id="myCanvas" width="700" height="700" style="border:1px solid #000000;"></canvas>
    <script src="code.js"></script>
    <p id="info">
        Every cell is colored by the average color of its 8 neighbours, implementation of a cellular automaton that I've seen
        <a href="https://www.youtube.com/watch?v=lyZUzakG3bE">in this video by Rudy Rucker</a><br>
        <a href="https://www.youtube.com/watch?v=R8-q6-s8s78">Another nice video</a>
    </p>
    
    <div id="buttons">
        <button onclick="MainLoop()">Next frame</button>
        <button onclick="FillArray(true)">Randomize</button>
        <button onclick="FillArray()">Start from blank</button>
        <button id="play" onclick="StartSim()">Play</button>
        <button id="stop" onclick="StopSim()">Stop</button>
    </div>
    <div id="sliders">
        <input type="color" value="#FF0000" id="colorInput"></input>
        <label for="colorInput"> Brush color </label><br>
        <label for="brushSize"> Brush size: </label>
        <input id="brushSize" size="1"></input><br>
    </div>
    <div id="inputs">
        <label for="len"> Grid size: </label>
        <input id="len" size="1"></input><br>  
        <button style="padding:10px 10px; position: relative; top: 10px; left: 20px;" onclick="SetSize()"> Go! </button>
    </div>
    <div id="imageInputDiv">
        <input type="file" id="imageInput" accept="image/jpeg, image/png, image/jpg"><br>
        <canvas id="imgCanvas" width="200" height="200" style="border:1px solid #000000;" hidden></canvas>
    </div>
    <div id="colorModeDropdown">
        <select onchange="ChangeColorMode()" id="colorModeSelect">
            <option value="hs">Hue + saturation</option>
            <option value="hue">Hue</option>
            <option value="hsv">HSV</option>
            <option value="rgb">RGB</option>   
        </select>
        <input type="checkbox" id="addOne" checked></input>
        <label for="addOne" name="addOneLabel">Add 1 to average</label>

        <input type="range" id="lightnessSlider" min="0" max="100" value="50" step="1"></input>
        <label for="addOne" id="lightnessLabel">Lightness</label>

        <input type="range" id="delaySlider" min="0" max="1000" value="0" step="10"></input>
        <label for="delaySlider"id="delayLabel">Delay</label>
    </div>
    <p id="warning">
        EPILEPSY WARNING
    </p>
</body>
</html>
